(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{18:function(e,t,a){},23:function(e,t,a){e.exports=a(36)},28:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(11),s=a.n(o),i=(a(28),a(4)),c=a(5),l=a(7),u=a(6),d=(a(18),a(3)),p=a(20),m={zoom:4,center:{lat:12.9716,lng:77.5946}},f=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"onScriptLoad",value:function(){var e=new window.google.maps.Map(document.getElementById(this.props.id),this.props.options);this.props.onMapLoad(e)}},{key:"componentDidMount",value:function(){var e=this;if(window.google)this.onScriptLoad();else{var t=document.createElement("script");t.type="text/javascript",t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDD48XLaImS9m7ssNrOF0-Yt6ZR0aZCPec";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a),t.addEventListener("load",(function(t){e.onScriptLoad()}))}}},{key:"render",value:function(){return n.a.createElement("div",{id:this.props.id,"data-test":"mapComponent",className:"map"})}}]),a}(r.Component),k=a(9),h=a(39),v="Notification";function g(e){return{markers:e,type:"saveMarkers"}}function M(e){return{type:"getAllLatLongs",latLongs:e}}function w(e,t){return{status:e,elementToEdit:t,type:"saveStatus"}}function b(e){return{type:v,message:e}}function y(){return function(e){return h.a.get("/marker/getMarkers")}}var E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={location:e.elementToEdit||"",searchResults:[],loading:!1},r}return Object(c.a)(a,[{key:"createMarkers",value:function(e){var t=this;this.props.saveMarkers([]),this.clearAllMarkers(),this.props.map.setCenter({lat:Number(e.lat),lng:Number(e.long)}),this.props.createMarker(e).then((function(e){t.props.readMarkers().then((function(e){t.props.getAllLatLongs(e.data),t.props.addMarkerProp(t.props.map,t.props.latLongsArray),t.props.notification("marker created successfully"),"add"===t.props.status&&t.props.addStatus("display")}))}))}},{key:"clearAllMarkers",value:function(){for(var e=this.props.markers,t=0;t<e.length;t++)e[t].setMap(null)}},{key:"searchResults",value:function(){var e=this;this.props.clearError();var t=this.state.location;this.setState({loading:!0}),""===t?(this.setState({searchResults:[],location:"",loading:!1}),this.props.notifyError("Please enter location to search")):this.props.getLatLong(t).then((function(t){var a=t.data.map((function(e){return{lat:e.lat,long:e.lon,location:e.display_name,edit:!1}}));e.setState({searchResults:a,location:"",loading:!1})})).catch((function(t){e.setState({searchResults:[],location:"",loading:!1}),404===t.response.status&&e.props.notifyError("Location Not Found")}))}},{key:"setlocation",value:function(e){var t=e.target.value;this.setState({location:t})}},{key:"showMarkedPlaces",value:function(e){this.props.clearError(),this.props.addStatus("display")}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"addMarkerSection","data-test":"addMarkerComponent"},n.a.createElement("div",{className:"searchBox"},n.a.createElement("input",{type:"text",className:"locationInput","data-test":"locationInput",value:this.state.location,onChange:function(t){return e.setlocation(t)}})),n.a.createElement("div",{className:"saveMarker"},n.a.createElement("button",{"data-test":"searchButton",onClick:function(t){return e.searchResults(t)}},"Search")),n.a.createElement("div",{className:"showMarkedPlaces"},n.a.createElement("button",{"data-test":"showMarkedPlaces",onClick:function(t){return e.showMarkedPlaces(t)}},"Show Marked Places")),n.a.createElement("div",{className:"searchResults"},this.state.searchResults&&this.state.searchResults.map((function(t){return n.a.createElement("div",{key:t.location,className:"blockLevelCard"},n.a.createElement("div",{className:"searchedLocations"},t.location),n.a.createElement("div",null,n.a.createElement("button",{"data-test":"addToMap",onClick:function(a){return e.createMarkers(t)}},"Add To Map")))})),this.props.error&&n.a.createElement("div",null,n.a.createElement("b",null,this.props.error)),this.state.loading&&n.a.createElement("div",null,"Loading....")))}}]),a}(r.Component),j=Object(k.b)((function(e){return Object(d.a)({},e)}),{getLatLong:function(e){var t="https://eu1.locationiq.com/v1/search.php?key=pk.c61edb80b5453ae24c31c18b3a0c9f50&q="+e+"&format=json";return function(e){return h.a.get(t)}},createMarker:function(e){return function(t){return h.a.post("/marker/addMarker",e)}},readMarkers:y,addStatus:w,saveMarkers:g,getAllLatLongs:M,notification:b,notifyError:function(e){return{type:"error",error:e}},clearError:function(){return{type:"clearError"}}})(E),O=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"addInfoWindow",value:function(e){e.preventDefault(),window.infowindow&&window.infowindow.close();var t=this.props,a=t.map,r=t.placeObject,n=t.latLongsArray,o=t.markers;window.infowindow=new window.google.maps.InfoWindow({content:r.location}),n.forEach((function(e,t){e.location===r.location&&window.infowindow.open(a,o[t])})),a.setCenter({lat:Number(r.lat),lng:Number(r.long)})}},{key:"clearMarker",value:function(e){var t=this.props,a=t.latLongsArray,r=t.markers,n=t.saveMarkers;a.forEach((function(t,a){t.location===e.location&&(r[a].setMap(null),r.splice(a,1))})),n(r)}},{key:"deleteMarker",value:function(e,t){var a=this;e.stopPropagation(),window.infowindow&&window.infowindow.close(),this.props.deleteMarker(t),this.clearMarker(t),this.props.readMarkers().then((function(e){a.props.getAllLatLongs(e.data)}))}},{key:"editMarker",value:function(e,t){e.stopPropagation(),window.infowindow&&window.infowindow.close(),t.edit=!0,this.props.editMarker(t),this.props.addStatus("add",t.location)}},{key:"render",value:function(){var e=this,t=this.props.placeObject;return n.a.createElement("div",{className:"editDeleteCard","data-test":"editDeleteComponent",onClick:function(t){return e.addInfoWindow(t)}},n.a.createElement("div",{className:"location"},t.location),n.a.createElement("div",null,n.a.createElement("span",null,n.a.createElement("button",{className:"editMarker","data-test":"editButton",onClick:function(a){return e.editMarker(a,t)}},"Edit")),n.a.createElement("span",null,n.a.createElement("button",{className:"deleteMarker","data-test":"deleteButton",onClick:function(a){return e.deleteMarker(a,t)}},"Delete"))))}}]),a}(r.Component),L=Object(k.b)((function(e){return Object(d.a)({},e)}),{deleteMarker:function(e){return function(t){h.a.delete("/marker/deleteMarker",{data:e}).then((function(e){t(b("marker deleted successfully"))}))}},readMarkers:y,getAllLatLongs:M,addStatus:w,editMarker:function(e){return function(t){h.a.put("/marker/editMarker",e).then((function(e){t(b("marker edited successfully"))}))}},saveMarkers:g})(O),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).addMarker=function(e,t){var a=t||r.props.latLongsArray,n=[];if(a){var o,s=Object(p.a)(a);try{for(s.s();!(o=s.n()).done;){var i=o.value,c=r.newMarker(e,Number(i.lat),Number(i.long));n.push(c)}}catch(l){s.e(l)}finally{s.f()}}r.props.map||r.props.saveMap(e),r.props.saveMarkers(n)},r.props.readMarkers().then((function(e){r.props.getAllLatLongs(e.data),r.props.addStatus("display"),r.addMarker(r.props.map)})),r}return Object(c.a)(a,[{key:"newMarker",value:function(e,t,a){if(window.google)return new window.google.maps.Marker({position:{lat:t,lng:a},map:e})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"marker","data-test":"markerComponent"},n.a.createElement(f,{id:"markerMap",options:m,onMapLoad:function(t){return e.addMarker(t)}}),n.a.createElement("div",{className:"markerPane"},"add"===this.props.status&&n.a.createElement(j,{addMarkerProp:this.addMarker,elementToEdit:this.props.elementToEdit}),"display"===this.props.status&&n.a.createElement("div",{className:"displayList"},n.a.createElement("div",null,n.a.createElement("button",{className:"addMarker","data-test":"addMarkerButton",onClick:function(t){return e.props.addStatus("add")}},"Add Marker")),n.a.createElement("div",{className:"markersList"},this.props.latLongsArray&&this.props.latLongsArray.map((function(t,a){return n.a.createElement(L,{newMarker:e.newMarker,placeObject:t,key:a})})),(!this.props.latLongsArray||0===this.props.latLongsArray.length)&&n.a.createElement("div",null,"No Marked Places")))))}}]),a}(r.Component),A=Object(k.b)((function(e){return Object(d.a)({},e)}),{readMarkers:y,saveMarkers:g,saveMap:function(e){return{map:e,type:"saveMap"}},addStatus:w,getAllLatLongs:M})(N),C=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"App","data-test":"appComponent"},n.a.createElement(A,null))}}]),a}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var S={};var P=a(22),B=a(14),R=Object(B.a)(P.a),I=Object(B.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getAllLatLongs":return Object(d.a)(Object(d.a)({},e),{},{latLongsArray:t.latLongs});case"saveMarkers":return Object(d.a)(Object(d.a)({},e),{},{markers:t.markers});case v:return Object(d.a)(Object(d.a)({},e),{},{message:t.message});case"saveStatus":return Object(d.a)(Object(d.a)({},e),{},{status:t.status,elementToEdit:t.elementToEdit});case"saveMap":return Object(d.a)(Object(d.a)({},e),{},{map:t.map});case"error":return Object(d.a)(Object(d.a)({},e),{},{error:t.error});case"clearError":return delete e.error,Object(d.a)({},e);default:return e}}),R);s.a.render(n.a.createElement(k.a,{store:I},n.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.514141db.chunk.js.map